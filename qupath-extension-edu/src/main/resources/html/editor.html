<!DOCTYPE html>
<html id="content">
<head>
    <base href="{{qupath-resource-root}}" />
    <link rel="stylesheet" type="text/css" href="css/ckeditor.css">
</head>
<body data-editor="DecoupledDocumentEditor" data-collaboration="false">

<main>
    <div class="row">
        <div class="document-editor__toolbar"></div>
    </div>

    <div class="row row-editor">
        <div class="editor" id="qupath-editor">
            {{qupath-input}}
        </div>
    </div>
</main>

<script src="ckeditor/ckeditor.js"></script>
<script>
    DecoupledDocumentEditor.create( document.querySelector( '.editor' ), {
        toolbar: {
            viewportTopOffset: 50,
            items: [
                'heading',
                '|',
                'fontSize',
                'fontFamily',
                '|',
                'bold',
                'italic',
                'underline',
                'strikethrough',
                'highlight',
                'fontColor',
                'fontBackgroundColor',
                'specialCharacters',
                'horizontalLine',
                '|',
                'alignment',
                '|',
                'numberedList',
                'bulletedList',
                '|',
                'subscript',
                'superscript',
                '|',
                'indent',
                'outdent',
                '|',
                'todoList',
                'link',
                'blockQuote',
                'imageUpload',
                'imageInsert',
                'insertTable',
                'mediaEmbed',
                '|',
                'undo',
                'redo'
            ]
        },
        language: 'en',
        image: {
            styles: [
                'alignLeft', 'alignCenter', 'alignRight'
            ],
            toolbar: [
                'imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight',
                '|',
                'imageTextAlternative'
            ]
        },
        table: {
            contentToolbar: [
                'tableColumn',
                'tableRow',
                'mergeTableCells'
            ]
        },
        licenseKey: '',
        simpleUpload: {
            uploadUrl: 'http://localhost:7777/api/v0/upload/ckeditor',

            headers: {
                {{qupath-auth}}
            }
        },

    }).then( editor => {
        window.editor = editor;

        document.querySelector( '.document-editor__toolbar' ).appendChild( editor.ui.view.toolbar.element );
        document.querySelector( '.ck-toolbar' ).classList.add( 'ck-reset_all' );

    }).catch( error => {
        console.error( 'Oops, something went wrong!' );
        console.error( error );
    });
</script>
</body>
</html>
